<!DOCTYPE html>
<!--[if lt IE 7]>       <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>          <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>          <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->  <html class="no-js" lang="en"> <!--<![endif]-->
<head>
    <title>Android And Arduino Simple Hello World Tutorial - UDOO Quad/Dual Docs</title>
    <meta name="description" content="UDOO Board Documentation" />
    <meta name="author" content="UDOO Team">
    <meta charset="UTF-8">
    <link rel="icon" href="http://www.udoo.org/wp-content/uploads/2014/12/logo_udoo_32.ico" type="image/x-icon">
    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    <link href='//fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700&subset=latin,cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
    <!-- CSS -->
    <link href='../themes/daux/css/theme.min.css' rel='stylesheet' type='text/css'><link href='../themes/daux/css/theme-navy.udoo.css' rel='stylesheet' type='text/css'><link href='../themes/daux/css/udoo.css' rel='stylesheet' type='text/css'>
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="google-site-verification" content="GlKlGkbxuWQ3LNWx0akLYkqoWLrtF5b0ug9UpGadSuc" />
    <meta name="google-site-verification" content="vL1Qo6JWKZBq6fzVJLJhbyqHya1TBhZd78OJDA-Qe1s" />
    
    <!-- jQuery -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script>
    <script src="../themes/daux/js/bootstrap.min.js"></script>
</head>
<body class="">
    
    <a href="https://github.com/UDOOboard/Docs" target="_blank" id="github-ribbon" class="hidden-print"><img src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"></a>
<div class="container-fluid fluid-height wrapper">
    <div class="navbar navbar-static-top hidden-print">
        <div class="container-fluid">
            <a class="udoologo pull-left" href="../index.html">
		<img src="http://www.udoo.org/docs/img/logo_docs.png"> <span>Docs</span>
		<a class="btn btn-lg button_docs pull-right" href="http://www.udoo.org/docs-neo/">UDOO Neo Docs</a>
</a>

        </div>
    </div>
    <div class="row columns content">
        <div class="left-column article-tree col-sm-3 hidden-print">
            <!-- For Mobile -->
            <div class="responsive-collapse">
                <button type="button" class="btn btn-sidebar" id="menu-spinner-button">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>
            <div id="sub-nav-collapse" class="sub-nav-collapse">
                <!-- Navigation -->
                <ul class='nav nav-list'><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Introduction</a><ul class='nav nav-list'><li class=''><a href="../Introduction/Introduction.html">Introduction</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Getting Started</a><ul class='nav nav-list'><li class=''><a href="../Getting_Started/Very_First_Start.html">Very First Start</a></li><li class=''><a href="../Getting_Started/Create_A_Bootable_MicroSD_card_for_UDOO_QUAD-DUAL.html">Create A Bootable MicroSD card for UDOO QUAD-DUAL</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Basic Setup</a><ul class='nav nav-list'><li class=''><a href="../Basic_Setup/Connecting_Via_Serial_Cable.html">Connecting Via Serial Cable</a></li><li class=''><a href="../Basic_Setup/Find_IP_Address.html">Find IP Address</a></li><li class=''><a href="../Basic_Setup/Web_Control_Panel.html">Web Control Panel</a></li><li class=''><a href="../Basic_Setup/Remote_Terminal_(SSH).html">Remote Terminal (SSH)</a></li><li class=''><a href="../Basic_Setup/Remote_Desktop_(VNC).html">Remote Desktop (VNC)</a></li><li class=''><a href="../Basic_Setup/UDOO_Configuration_Tool.html">UDOO Configuration Tool</a></li><li class=''><a href="../Basic_Setup/Usb_Direct_Connection.html">Usb Direct Connection</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Software & OS Distro</a><ul class='nav nav-list'><li class=''><a href="../Software_&_OS_Distro/UDOObuntu.html">UDOObuntu</a></li><li class=''><a href="../Software_&_OS_Distro/Android.html">Android</a></li><li class=''><a href="../Software_&_OS_Distro/Other_Unofficial_Distributions.html">Other Unofficial Distributions</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Hardware & Accessories</a><ul class='nav nav-list'><li class=''><a href="../Hardware_&_Accessories/GPIO_Pinout.html">GPIO Pinout</a></li><li class=''><a href="../Hardware_&_Accessories/IMX6_And_Sam3X_Communication.html">IMX6 And Sam3X Communication</a></li><li class=''><a href="../Hardware_&_Accessories/UDOO_LVDS_Panels.html">UDOO LVDS Panels</a></li><li class=''><a href="../Hardware_&_Accessories/UDOO_Camera_Module.html">UDOO Camera Module</a></li><li class=''><a href="../Hardware_&_Accessories/Boot_from_SATA.html">Boot from SATA</a></li><li class=''><a href="../Hardware_&_Accessories/SPI.html">SPI</a></li><li class=''><a href="../Hardware_&_Accessories/PWM.html">PWM</a></li><li class=''><a href="../Hardware_&_Accessories/Watchdog.html">Watchdog</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Wireless Communication</a><ul class='nav nav-list'><li class=''><a href="../Wireless_Communication/WiFi.html">WiFi</a></li><li class=''><a href="../Wireless_Communication/WiFi_SoftAP.html">WiFi SoftAP</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Cookbook Linux</a><ul class='nav nav-list'><li class=''><a href="../Cookbook_Linux/Understanding_Linux_Software_Management_And_Installing.html">Understanding Linux Software Management And Installing</a></li><li class=''><a href="../Cookbook_Linux/Linux_Command_Line_Interface.html">Linux Command Line Interface</a></li><li class=''><a href="../Cookbook_Linux/Set_video_output.html">Set video output</a></li><li class=''><a href="../Cookbook_Linux/Device_Tree_Editor.html">Device Tree Editor</a></li><li class=''><a href="../Cookbook_Linux/Change_Web_Control_Panel_port.html">Change Web Control Panel port</a></li><li class=''><a href="../Cookbook_Linux/Playing_video_with_GStreamer.html">Playing video with GStreamer</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Arduino DUE (Sam3x)</a><ul class='nav nav-list'><li class=''><a href="../Arduino_DUE_(Sam3x)/Overview.html">Overview</a></li><li class=''><a href="../Arduino_DUE_(Sam3x)/Programming_Arduino_Due_from_Internal_Processor(iMX6).html">Programming Arduino Due from Internal Processor(iMX6)</a></li><li class=''><a href="../Arduino_DUE_(Sam3x)/Programming_Arduino_Due_from_External_PC.html">Programming Arduino Due from External PC</a></li><li class=''><a href="../Arduino_DUE_(Sam3x)/Troubleshooting_Programming_Arduino_Due_from_External_PC.html">Troubleshooting Programming Arduino Due from External PC</a></li><li class=''><a href="../Arduino_DUE_(Sam3x)/Arduino_Shields_With_UDOO.html">Arduino Shields With UDOO</a></li></ul></li><li class=' has-children'><a href="../Serial_Libraries/index.html" class="folder"><i class="arrow">&nbsp;</i>Serial Libraries</a><ul class='nav nav-list'><li class=''><a href="../Serial_Libraries/Java_Serial_Libraries.html">Java Serial Libraries</a></li><li class=''><a href="../Serial_Libraries/C_Serial_Libraries.html">C Serial Libraries</a></li><li class=''><a href="../Serial_Libraries/PHP_Serial_Libraries.html">PHP Serial Libraries</a></li><li class=''><a href="../Serial_Libraries/Python_Serial_Libraries.html">Python Serial Libraries</a></li></ul></li><li class='open has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Cookbook Android</a><ul class='nav nav-list'><li class=''><a href="../Cookbook_Android/UDOO_Android_Boot_Walkthrough.html">UDOO Android Boot Walkthrough</a></li><li class=''><a href="../Cookbook_Android/UDOO_Android_Settings.html">UDOO Android Settings</a></li><li class=''><a href="../Cookbook_Android/Switch_Between_Adb_Debug_And_ADK_Connection.html">Switch Between Adb Debug And ADK Connection</a></li><li class=''><a href="../Cookbook_Android/How_To_Install_Gapps_On_UDOO_Running_Android.html">How To Install Gapps On UDOO Running Android</a></li><li class='active'><a href="../Cookbook_Android/Android_And_Arduino_Simple_Hello_World_Tutorial.html">Android And Arduino Simple Hello World Tutorial</a></li><li class=''><a href="../Cookbook_Android/Android_And_Arduino_Bidirectional_Communication.html">Android And Arduino Bidirectional Communication</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Projects Examples</a><ul class='nav nav-list'><li class=''><a href="../Projects_Examples/Face_Recognition_And_Face_Tracking_Via_OpenCV_And_UDOO.html">Face Recognition And Face Tracking Via OpenCV And UDOO</a></li><li class=''><a href="../Projects_Examples/Remote_Metereological_Station_With_UDOO.html">Remote Metereological Station With UDOO</a></li><li class=''><a href="../Projects_Examples/DIY_NAS_With_Openmediavault_And_UDOO.html">DIY NAS With Openmediavault And UDOO</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Advanced Topics</a><ul class='nav nav-list'><li class=''><a href="../Advanced_Topics/Setup_development_environment.html">Setup development environment</a></li><li class=''><a href="../Advanced_Topics/Compile_UDOObuntu_(complete_bootable_image).html">Compile UDOObuntu (complete bootable image)</a></li><li class=''><a href="../Advanced_Topics/Compile_U-Boot_Bootloader.html">Compile U-Boot Bootloader</a></li><li class=''><a href="../Advanced_Topics/Compile_Linux_Kernel.html">Compile Linux Kernel</a></li><li class=''><a href="../Advanced_Topics/Compile_Android_From_Source.html">Compile Android From Source</a></li><li class=''><a href="../Advanced_Topics/Install_A_Custom_Debian_Distro_With_Debootstrap.html">Install A Custom Debian Distro With Debootstrap</a></li><li class=''><a href="../Advanced_Topics/Boot_process.html">Boot process</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Mods</a><ul class='nav nav-list'><li class=''><a href="../Mods/Mod_Your_UDOO_To_Improve_WiFi_Performances.html">Mod Your UDOO To Improve WiFi Performances</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>FAQ</a><ul class='nav nav-list'><li class=''><a href="../FAQ/Introductive.html">Introductive</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Troubleshooting</a><ul class='nav nav-list'><li class=''><a href="../Troubleshooting/Why_My_UDOO_Wont_Boot.html">Why My UDOO Wont Boot</a></li><li class=''><a href="../Troubleshooting/How_Can_I_Solve_My_HDMI_Issues.html">How Can I Solve My HDMI Issues</a></li><li class=''><a href="../Troubleshooting/How_Do_I_Set_Up_My_LVDS_Panel.html">How Do I Set Up My LVDS Panel</a></li></ul></li><li class=' has-children'><a href="#" class="aj-nav folder"><i class="arrow">&nbsp;</i>Hackaton Survival Guide</a><ul class='nav nav-list'><li class=''><a href="../Hackaton_Survival_Guide/Mirroring_UDOOs_Desktop_on_your_PC_with_VNC_Remote_Desktop.html">Mirroring UDOOs Desktop on your PC with VNC Remote Desktop</a></li><li class=''><a href="../Hackaton_Survival_Guide/Programming_UDOOs_Arduino_from_your_PC.html">Programming UDOOs Arduino from your PC</a></li><li class=''><a href="../Hackaton_Survival_Guide/Useful_Resources.html">Useful Resources</a></li></ul></li></ul>

                <div class="sidebar-links">
                    
                        <!-- Links -->
                        <a href="http://www.udoo.org" target="_blank">Home</a><br><a href="http://www.udoo.org/downloads" target="_blank">Downloads</a><br><a href="http://www.udoo.org/tutorial" target="_blank">Tutorials</a><br><a href="http://www.udoo.org/forum" target="_blank">Forum</a><br>
                        <!-- Twitter -->
                        
                        <hr/>
                    
                </div>
            </div>
        </div>
        <div class="right-column  content-area col-sm-9">

            <div class="content-page">
                
                <div class="doc_content">
                    <article>
            <div class="page-header">
            <h1>Android And Arduino Simple Hello World Tutorial</h1>
        </div>
    
    <h2 id="page_Overview">Overview</h2>
<p>Visit our Tutorials section to learn more about: <a href="/tutorial/android-arduino-udoo-simple-hello-world-tutorial/">Android And Arduino - Simple Hello World Tutorial</a>.</p>
<p dir="ltr">Hi guys,
in this tutorial we'll see how to implement an Android App and an Arduino sketch that exploit UDOO DUAL/QUAD's potentials thanks to the ADK (<a title="Accessory Development Kit" href="http://developer.android.com/tools/adk/index.html">Accessory Development Kit</a>). Take it as a learning excercise, because we're just using the very basic Hello World you previously saw with Arduino. This time however, the LED will be turned on via an Android App.</p>
<p dir="ltr">The Accessory Development Kit provided by Google allows to building accessories for Android devices based on the Arduino framework so with UDOO DUAL/QUAD we have the Android device and his Arduino accessory in the same board.</p>
<p dir="ltr">There’s an Arduino Due on UDOO DUAL/QUAD so we can use the Google ADK 2012.</p>
What we need is:
<ul>
	<li>UDOO DUAL/QUAD</li>
	<li>MicroSD with Android preinstalled</li>
	<li>LED</li>
	<li>The development environments: Android SDK and Arduino IDE, installed on an external PC</li>
	<li>Knowledge of Android App programming</li>
</ul>
<p dir="ltr">If you've met all the above requirements, let’s boot Android! And let's understand how the Sam3x Arduino controller is connected to IMX6, where Android runs. Using the ADK, the communication between i.MX6 processor running Android and SAM3x8E processors is <strong>not</strong> made through the shared serial port. It comes through the processors’ native USB OTG bus, instead. i.MX6’ s native USB OTG port can be switched between SAM3X8E microcontroller and external microUSB port CN3. The switching is managed by two i.Mx6 pins..</p>
<p dir="ltr"> It is necessary to power OTG USB bus by plugging the jumper J2, which enables the voltage supply line of the bus.</p>
<p dir="ltr">In this configuration i.MX6 processor communicates with SAM3X8e using AOA protocol. To do this you must program SAM3X8E with a sketch including some specific libraries and then install on Android an app configured to use AOA protocol.</p>
At boot the connection is between the two processors, plugging an USB cable to CN3 connector will have no effect, since CN3 is disconnected.
<p>For further informations you can check  the dedicated guide to Android + Arduino ADK programming.</p>
<p>Now go in the setting -&gt; developer options and click on External OTG port enabled</p>
<p>Now we can plug the microUSB cable to che CN3 connector, a  dialog pop-up will then appear and you have to allow the debug for your external computer. Check the box for always allow from this computer. Once you've allowed the debugging let's see another way to connect UDOO DUAL/QUAD to your external pc through the Wi-Fi.</p>
<p>To do that, we just installed an app that enables adb over wifi, there are some in the store. We installed <a title="AdbWireless" href="https://play.google.com/store/apps/details?id=com.wave18.adbwireless">adbWireless</a>.</p>
<p>Once you've prepared your development environment, let's see how to build our Android APP.</p>
<p>For the Android app we use the <a href="http://developer.android.com/guide/topics/connectivity/usb/accessory.html">USB Accessory mode</a> that allows users to connect USB host hardware (the Arduino side of UDOO DUAL/QUAD) specifically designed for Android-powered devices. The Accessory mode feature is supported by Android since the 3.1 version (API 12).</p>
<p>When the Android-powered device is in USB accessory mode, the connected USB hardware (an Android USB accessory in this case) acts as the host and powers the bus.</p>
<img alt="" src="https://lh3.googleusercontent.com/hTh0dx_phyoRGMAi3y-MqOLrQlaOeatJImwTk_1gvD0ka4sdUm7m_VcUImch-Qt5h2tBRj8sqx76J_3cb6PityRrZhaDsLkxi9nIKosEnNDvb157cXeuL99L-w" width="563px;" height="162px;" />
<p>These are the needed components of the App:
 </p>
<p dir="ltr"><strong>AndroidManifest.xml</strong></p>
<p dir="ltr">The following list describes what you need to add to your application's manifest file before working with the USB accesory APIs</p>
<p dir="ltr">Include a &lt;uses-feature&gt; element that declares that your application uses the android.hardware.usb.accessory feature.</p>
<pre><code class="language-bash">
&lt;uses-feature android:name=&quot;android.hardware.usb.accessory&quot;&gt;

</code></pre>
<p dir="ltr">Set the minimum SDK of the application at least to API Level 12. Since UDOO DUAL/QUAD comes with the last Android image with the 4.3 version the targetSdkVersion is 18.</p>
<pre><code class="language-bash">
&lt;uses-sdk android:minSdkVersion=&quot;15&quot; android:targetSdkVersion=&quot;18&quot;&gt;

</code></pre>
<p dir="ltr">If you want your application to be notified of an attached USB accessory, specify an &lt;intent-filter&gt; and&lt;meta-data&gt; element pair for the android.hardware.usb.action.USB_ACCESSORY_ATTACHED intent in your main activity. The &lt;meta-data&gt; element points to an external XML resource file (res/xml/accessory_filter.xml) that declares identifying information about the accessory that you want to detect.</p>
<pre><code class="language-bash">
&lt;activity&gt;
……

   &lt;intent-filter&gt;
      &lt;action android:name=&quot;android.hardware.usb.action.USB_ACCESSORY_ATTACHED&quot; &gt;
   &lt;intent-filter&gt;

   &lt;meta-data android:name=&quot;android.hardware.usb.action.USB_ACCESSORY_ATTACHED&quot;
      android:resource=&quot;@xml/accessory_filter&quot;&gt;

&lt;/activity&gt;

</code></pre>
<p> </p>
<p><strong>res/xml/accessory_filter.xml</strong></p>
<p>In the XML resource file, declare &lt;usb-accessory&gt; elements for the accessories that you want to filter. Each&lt;usb-accessory&gt; can have the following attributes:</p>
<ul>
	<li dir="ltr">
<p dir="ltr">manufacturer</p>
</li>
	<li dir="ltr">
<p dir="ltr">model</p>
</li>
	<li dir="ltr">
<p dir="ltr">version</p>
</li>
</ul>
<p dir="ltr">The same attributes have to declared in the Arduino sketch running on SAM3X</p>
<pre><code class="language-bash">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;&gt;
&lt;resources&gt;

   &lt;usb-accessory manufacturer=&quot;Aidilab&quot; model=&quot;UDOO_ADK&quot; version=&quot;1.0&quot;&gt;

&lt;/resources&gt;

</code></pre>
<p> </p>
<p><strong>UDOOBlinkLEDActivity.java</strong></p>
<p>There’s a new easiest way to implement the ADK communication, the <a href="https://github.com/palazzem/adk-toolkit">ADK Toolkit</a> by palazzem, a member of our great community.
This toolkit helps beginners to be up and running with ADK 2012 without difficulties.</p>
<p>If you are using <strong>Eclipse + ADT</strong> you need to import the compiled library in the application’s “Java Build Path”.
Download the last release .jar file <a href="https://github.com/palazzem/adk-toolkit/releases">here</a>.
Copy the .jar file in the lib/ folder of the Android application. Right Click on the application project and go to “properties”. In the left menu choose “Java Bulid Path” go to the tab “Libraries” and “Add JARs” to import the .jar ADKToolkit library in the applications.</p>
<p>if you are using <strong>Gradle</strong>, the library is available on MavenCentral and you can add it to your build.gradle:</p>
<pre><code class="language-bash">
dependencies {
    compile 'me.palazzetti:adktoolkit:0.3.0'
}

</code></pre>
<p>In your Java code the package you need to import is <em>me.palazzetti.adktoolkit.AdkManager</em>. That contain the class to support the accessory mode.</p>
<pre><code class="language-bash">
import me.palazzetti.adktoolkit.AdkManager

</code></pre>
<p>You need to initialize the AdkManager in the onCreate() method:</p>
<pre><code class="language-bash">
private AdkManager mAdkManager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mAdkManager = new AdkManager((UsbManager) getSystemService(Context.USB_SERVICE));
}

</code></pre>
<p>To write and read messages to and from the Arduino Accessory you can use the <em>writeSerial()</em> and <em>readSerial()</em> methods. You can write and read a single char or a String object. So easy.
In this example we used only the <em>writeSerial()</em> method to write a single char in order to instruct the accessory to turns on (we send “1″) or turn off (we send “0″) the LED.</p>
<pre><code class="language-bash">
if (buttonLED.isChecked()) {
    mAdkManager.writeSerial(&quot;1&quot;);
} else {
    mAdkManager.writeSerial(&quot;0&quot;);
}

</code></pre>
<p>You can check the <a href="http://android-adk-toolkit.readthedocs.org/en/latest/index.html">full documentation</a> of the ADK Toolkit for more information.</p>
<p>Now, we just set up, compile and Upload our Arduino Sketch.</p>
<p dir="ltr"><strong>UDOOArduinoADKDemo.ino</strong></p>
<p dir="ltr">The accessory code must make a few calls to initialize USB connectivity, including setting the accessory identification strings:</p>
<pre><code class="language-bash">
char descriptionName[] = &quot;UDOOAndroidADKDemo&quot;;
char modelName[] = &quot;UDOO_ADK&quot;;         // your Arduino Accessory name (Need to be the same defined in the Android App)
char manufacturerName[] = &quot;Aidilab&quot;;   // manufacturer (Need to be the same defined in the Android App)

char versionNumber[] = &quot;1.0&quot;;          // version (Need to be the same defined in the Android App)
char serialNumber[] = &quot;1&quot;;
char url[] = &quot;http://www.udoo.org&quot;;    // If there isn't any compatible app installed, Android suggest to visit this url

USBHost Usb;
ADK adk(&amp;amp;Usb, manufacturerName, modelName, descriptionName, versionNumber, url, serialNumber);

</code></pre>
<p>The identification strings must match the USB accessory filter settings specified in the connecting Android application,otherwise the application cannot connect with the accessory.</p>
<p>Once USB is enabled with code shown above, the accessory listens for connection requests. The ADK library handles listening and connection details, so the accessory calls USB.Task(); once during each loop execution.</p>
<p dir="ltr">The accessory must then check for a live USB connection to process commands and receive messages. :</p>
<pre><code class="language-bash">
void loop()
{
    Usb.Task();

    if (adk.isReady()) {
       adk.read(&amp;amp;bytesRead, RCVSIZE, buf);// read data into buf array
       if (bytesRead &amp;gt; 0) {
          if (parseCommand(buf[0]) == 1) {
             // Received &quot;1&quot; - turn on LED
             digitalWrite(LED_PIN, HIGH);
          } else if (parseCommand(buf[0]) == 0) {
             // Received &quot;0&quot; - turn off LED
             digitalWrite(LED_PIN, LOW);
          }

}

// the characters sent to Arduino are interpreted as ASCII, we decrease 48 to return to ASCII range.
uint8_t parseCommand(uint8_t received) {
  return received - 48;
}

</code></pre>
<p> </p>
<p dir="ltr">Now, Arduino will listen as an USB accessory, and if it receives the byte 1, it will turn on the LED, otherwise it will turn it off. To check that's working, all you have to do is connect the LED to the declared PIN, in this case 13.</p>
<p dir="ltr">If you need more documentation, you can just check those links out:</p>
<p dir="ltr"><a href="http://developer.android.com/guide/topics/connectivity/usb/accessory.html">USB Accessory</a></p>
<p dir="ltr"><a href="http://developer.android.com/tools/adk/adk2.html">ADK 2012</a></p>
<p dir="ltr">Here you can download the <a href="https://github.com/UDOOboard/android_adk_demo">complete code</a> of this example demo</p>
<p>If you need the ADB driver you can get it from the <a href="http://adbdriver.com/downloads/" title="adbdriver" target="_blank">adbdriver website</a></p>
<p dir="ltr">This was just a simple tutorial showing how to interface Android and Arduino natively on UDOO DUAL/QUAD. We're already preparing some brand new tutorials to further digg into that matter, enabling you to create advanced Android powered projects!</p>

        <nav>
        <ul class="pager">
            <li><a href="../Cookbook_Android/How_To_Install_Gapps_On_UDOO_Running_Android.html">Previous</a></li>            <li><a href="../Cookbook_Android/Android_And_Arduino_Bidirectional_Communication.html">Next</a></li>        </ul>
    </nav>
        
    <span style="float: left; font-size: 10px; color: gray;">
    This page was last updated on Monday, October 10, 2016 at 1:17 PM.
    </span>
    
</article>

                </div>
            </div>
        </div>
    </div>
</div>

    
    <!-- hightlight.js -->
    <script src="../themes/daux/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    <!-- JS -->
    
    <script src="../themes/daux/js/daux.js"></script>

        <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-40057783-1', 'auto', {
            'allowLinker': true});
      ga('send', 'pageview');
    </script>
</body>
</html>
